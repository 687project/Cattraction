{"ast":null,"code":"var _jsxFileName = \"/home/my/Desktop/Course/687/demo/frontend/src/components/Auth/Login.js\";\nimport React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport axios from 'axios';\nimport background from '../../statics/login_sidepic.jpg';\nimport logoSmall from '../../statics/logoSmall.jpeg';\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport * as actions from \"../../actions/auth\";\n\nfunction Copyright() {\n  return /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 9\n    }\n  }, 'Copyright © ', /*#__PURE__*/React.createElement(Link, {\n    color: \"inherit\",\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }\n  }, \"Cattraction\"), ' ', new Date().getFullYear(), '.');\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100vh'\n  },\n  image: {\n    backgroundImage: `url(${background})`,\n    backgroundRepeat: 'no-repeat',\n    backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center'\n  },\n  imageLogoSmall: {\n    backgroundRepeat: 'no-repeat',\n    backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n    borderRadius: '50%',\n    width: '80px'\n  },\n  welcomeTitle: {\n    color: '#595959' // fontFamily: 'Comic Sans MS',\n\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\n\nfunction SignInSide(props) {\n  const classes = useStyles();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  if (props.loginStatus) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    component: \"main\",\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: false,\n    sm: 4,\n    md: 7,\n    className: classes.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 8,\n    md: 5,\n    component: Paper,\n    elevation: 6,\n    square: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoSmall,\n    alt: \"Avatar\",\n    className: classes.imageLogoSmall,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h0\",\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"b\", {\n    className: classes.welcomeTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, \"Welcome to Cattraction\")), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"email\",\n    label: \"Email\",\n    name: \"email\",\n    autoComplete: \"email\",\n    error: props.emailError !== '',\n    helperText: props.emailError,\n    autoFocus: true,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    name: \"password\",\n    label: \"Password\",\n    type: \"password\",\n    id: \"password\",\n    autoComplete: \"current-password\",\n    error: props.passwordError !== '',\n    helperText: props.passwordError,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submit,\n    onClick: e => props.handleSubmit(email, password),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, \"LOG IN\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    href: \"/signup\",\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 33\n    }\n  }, \"Not on Cattraction yet? Sign up\"))), /*#__PURE__*/React.createElement(Box, {\n    mt: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Copyright, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }))))));\n}\n\nconst mapStateToProps = state => ({\n  loginStatus: state.getIn(['auth', 'loginStatus']),\n  emailError: state.getIn(['auth', 'emailError']),\n  passwordError: state.getIn(['auth', 'passwordError'])\n});\n\nconst mapDispatchToProps = dispatch => ({\n  handleSubmit(email, password) {\n    axios({\n      method: 'post',\n      url: localStorage.getItem(\"ip\") + '/api/v1/user-profile/login',\n      params: {\n        email: email,\n        password: password\n      }\n    }).then(res => {\n      if (res.data[\"email\"] == null) {\n        dispatch(actions.emailError(\"No such user!\")); // alert(\"No such user!\")\n      } else if (password !== res.data[\"password\"]) {\n        dispatch(actions.passwordError(\"wrong password!\")); // alert(\"wrong password!\")\n      } else {\n        alert(\"log in successfully!\");\n        localStorage.setItem('token', res.data.token);\n        localStorage.setItem('email', res.data[\"email\"]);\n        localStorage.setItem('user', res.data);\n        localStorage.setItem('username', res.data[\"username\"]);\n        alert(localStorage.getItem('user')[\"username\"]);\n        dispatch(actions.authenticateUser(res.data.user));\n      }\n\n      console.log(res.data);\n    });\n  }\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInSide);","map":{"version":3,"sources":["/home/my/Desktop/Course/687/demo/frontend/src/components/Auth/Login.js"],"names":["React","useState","Button","CssBaseline","TextField","Link","Paper","Box","Grid","Typography","makeStyles","axios","background","logoSmall","connect","Redirect","actions","Copyright","Date","getFullYear","useStyles","theme","root","height","image","backgroundImage","backgroundRepeat","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","imageLogoSmall","borderRadius","width","welcomeTitle","color","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","marginTop","submit","SignInSide","props","classes","email","setEmail","password","setPassword","loginStatus","emailError","e","target","value","passwordError","handleSubmit","mapStateToProps","state","getIn","mapDispatchToProps","dispatch","method","url","localStorage","getItem","params","then","res","data","alert","setItem","token","authenticateUser","user","console","log"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport axios from 'axios';\nimport background from '../../statics/login_sidepic.jpg'\nimport logoSmall from '../../statics/logoSmall.jpeg'\nimport {connect} from \"react-redux\";\nimport {Redirect} from \"react-router-dom\";\nimport * as actions from \"../../actions/auth\";\n\nfunction Copyright() {\n    return (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n            {'Copyright © '}\n            <Link color=\"inherit\" href=\"#\">\n                Cattraction\n            </Link>{' '}\n            {new Date().getFullYear()}\n            {'.'}\n        </Typography>\n    );\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: '100vh',\n    },\n    image: {\n        backgroundImage: `url(${background})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundColor:\n            theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n    },\n    imageLogoSmall: {\n        backgroundRepeat: 'no-repeat',\n        backgroundColor:\n            theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        borderRadius: '50%',\n        width: '80px',\n    },\n    welcomeTitle: {\n        color: '#595959',\n        // fontFamily: 'Comic Sans MS',\n    },\n    paper: {\n        margin: theme.spacing(8, 4),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%',\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\n\nfunction SignInSide(props) {\n    const classes = useStyles();\n\n    const [ email, setEmail ] = useState('')\n    const [ password, setPassword ] = useState('')\n\n    if (props.loginStatus) {\n        return <Redirect to=\"/home\" />\n    }\n\n    return (\n        <Grid container component=\"main\" className={classes.root}>\n            <CssBaseline />\n            <Grid item xs={false} sm={4} md={7} className={classes.image} />\n            <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n                <div className={classes.paper}>\n                    <img src={logoSmall} alt=\"Avatar\" className={classes.imageLogoSmall} />\n                    <Typography component=\"h0\" variant=\"h4\">\n                        <br></br>\n                        <b className={classes.welcomeTitle}>Welcome to Cattraction</b>\n                    </Typography>\n\n                    <form className={classes.form} noValidate>\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            id=\"email\"\n                            label=\"Email\"\n                            name=\"email\"\n                            autoComplete=\"email\"\n                            error={props.emailError !== ''}\n                            helperText={props.emailError}\n                            autoFocus\n                            onChange={ e => setEmail(e.target.value) }\n                        />\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            name=\"password\"\n                            label=\"Password\"\n                            type=\"password\"\n                            id=\"password\"\n                            autoComplete=\"current-password\"\n                            error={props.passwordError !== ''}\n                            helperText={props.passwordError}\n                            onChange={ e => setPassword(e.target.value) }\n                        />\n                        <Button\n                            fullWidth\n                            variant=\"contained\"\n                            color=\"primary\"\n                            className={classes.submit}\n                            onClick={ e => props.handleSubmit(email, password)}\n                        >\n                            LOG IN\n                        </Button>\n                        <Grid container>\n                            <Grid item xs />\n                            <Grid item>\n                                <Link href=\"/signup\" variant=\"body2\">\n                                    {\"Not on Cattraction yet? Sign up\"}\n                                </Link>\n                            </Grid>\n                        </Grid>\n                        <Box mt={5}>\n                            <Copyright />\n                        </Box>\n                    </form>\n                </div>\n            </Grid>\n        </Grid>\n    );\n}\n\nconst mapStateToProps = (state) => ({\n    loginStatus: state.getIn(['auth', 'loginStatus']),\n    emailError: state.getIn(['auth', 'emailError']),\n    passwordError: state.getIn(['auth', 'passwordError']),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n    handleSubmit(email, password) {\n        axios({\n            method: 'post',\n            url:localStorage.getItem(\"ip\")+'/api/v1/user-profile/login',\n            params:{  email: email,password: password}\n        }).then(res => {\n            if(res.data[\"email\"] == null) {\n                dispatch(actions.emailError(\"No such user!\"))\n                // alert(\"No such user!\")\n            }\n            else if(password !== res.data[\"password\"]) {\n                dispatch(actions.passwordError(\"wrong password!\"))\n                // alert(\"wrong password!\")\n            }\n            else {\n                alert(\"log in successfully!\")\n                localStorage.setItem('token', res.data.token)\n                localStorage.setItem('email', res.data[\"email\"])\n                localStorage.setItem('user', res.data)\n                localStorage.setItem('username', res.data[\"username\"])\n                alert(localStorage.getItem('user')[\"username\"])\n                dispatch(actions.authenticateUser(res.data.user))\n            }\n            console.log(res.data);\n        })\n    },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInSide)\n"]},"metadata":{},"sourceType":"module"}